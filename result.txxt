=== TESTING FZF-LUA ENCHANTED FILES PICKER ===

1. Current history state:
=== FZF-LUA ENCHANTED FILES DEBUG ===
Current CWD: /home/otavio/Projetos/api
History file: /home/otavio/.local/share/neo-nvim/fzf-lua-enchanted-files-history.json
History file exists: yes
Raw history content: {"/home/otavio/Projetos/api":[{"path":" app/models/charge.rb","timestamp":1751651317},{"timestamp":1751650981,"path":" docker/entrypoint.sh"}]}
Loaded history for current CWD:
  1:  app/models/charge.rb (timestamp: 1751651317)
  2:  docker/entrypoint.sh (timestamp: 1751650981)
Recent files count: 0

Detailed file check:
  Entry 1:
    Original: ' app/models/charge.rb' (length: 26)
    Cleaned:  ' app/models/charge.rb' (length: 26)
    Readable: 0
    Character analysis:
      1: '<ee>' (byte: 238)
      2: '<9e>' (byte: 158)
      3: '<91>' (byte: 145)
      4: '<e2>' (byte: 226)
      5: '<80>' (byte: 128)
      6: '<82>' (byte: 130)
      7: 'a' (byte: 97)
      8: 'p' (byte: 112)
      9: 'p' (byte: 112)
      10: '/' (byte: 47)
      11: 'm' (byte: 109)
      12: 'o' (byte: 111)
      13: 'd' (byte: 100)
      14: 'e' (byte: 101)
      15: 'l' (byte: 108)
      16: 's' (byte: 115)
      17: '/' (byte: 47)
      18: 'c' (byte: 99)
      19: 'h' (byte: 104)
      20: 'a' (byte: 97)
      21: 'r' (byte: 114)
      22: 'g' (byte: 103)
      23: 'e' (byte: 101)
      24: '.' (byte: 46)
      25: 'r' (byte: 114)
      26: 'b' (byte: 98)
    Manual clean: ' app/models/charge.rb'
    Manual readable: 0
  Entry 2:
    Original: ' docker/entrypoint.sh' (length: 26)
    Cleaned:  ' docker/entrypoint.sh' (length: 26)
    Readable: 0
    Character analysis:
      1: '<ee>' (byte: 238)
      2: '<9e>' (byte: 158)
      3: '<95>' (byte: 149)
      4: '<e2>' (byte: 226)
      5: '<80>' (byte: 128)
      6: '<82>' (byte: 130)
      7: 'd' (byte: 100)
      8: 'o' (byte: 111)
      9: 'c' (byte: 99)
      10: 'k' (byte: 107)
      11: 'e' (byte: 101)
      12: 'r' (byte: 114)
      13: '/' (byte: 47)
      14: 'e' (byte: 101)
      15: 'n' (byte: 110)
      16: 't' (byte: 116)
      17: 'r' (byte: 114)
      18: 'y' (byte: 121)
      19: 'p' (byte: 112)
      20: 'o' (byte: 111)
      21: 'i' (byte: 105)
      22: 'n' (byte: 110)
      23: 't' (byte: 116)
      24: '.' (byte: 46)
      25: 's' (byte: 115)
      26: 'h' (byte: 104)
    Manual clean: ' docker/entrypoint.sh'
    Manual readable: 0

2. Testing file list generation...
History file: /home/otavio/.local/share/neo-nvim/fzf-lua-enchanted-files-history.json
History file content:
{"/home/otavio/Projetos/api":[{"path":" app/models/charge.rb","timestamp":1751651317},{"timestamp":1751650981,"path":" docker/entrypoint.sh"}]}
Current CWD: /home/otavio/Projetos/api
Files in history for current CWD:
  1: ' app/models/charge.rb' (readable: 0)
  2: ' docker/entrypoint.sh' (readable: 0)

3. Testing script generation...
Test recent files:
  1: ' app/models/charge.rb'
  2: ' docker/entrypoint.sh'
Generated script content:
#!/bin/bash
# Show recent files first
echo ' app/models/charge.rb'
echo ' docker/entrypoint.sh'
# Show all other files
find . -type f -not -path '*/.*' | sed 's|^\\./||'


4. Running picker with debug...
About to call plugin.files() - this should open the picker...
After selecting a file, check the output to see what gets passed to the action
Recent files count: 0
[Fzf-lua]: FZF_DEFAULT_COMMAND: '/home/otavio/.local/share/bob/v0.11.2/bin/nvim' -u NONE -l '/home/otavio/.local/share/neo-nvim/lazy/fzf-lua/lua/fzf-lua/spawn.lua' 'return [==[e2NtZCA9ICJmZGZpbmQgLS1oaWRkZW4gLS1jb2xvcj1uZXZlciAtLXR5cGUgZiAtLXR5cGUgbCAtLWV4Y2x1ZGUgLmdpdCIsIGdpdF9pY29ucyA9IGZhbHNlLCBkZWJ1ZyA9IHRydWUsIGcgPSB7X0VPTCA9ICJcbiIsIF9memZfbHVhX3NlcnZlciA9ICIvcnVuL3VzZXIvMTAwMC9memYtbHVhLjE3NTE2NTIxNTQuNjE3OTUzLjEiLCBfZGVidWcgPSB0cnVlfSwgY29sb3JfaWNvbnMgPSB0cnVlLCBmaWxlX2ljb25zID0gMX0=]==],[==[cmV0dXJuIHJlcXVpcmUoImZ6Zi1sdWEubWFrZV9lbnRyeSIpLmZpbGU=]==],[==[cmV0dXJuIHJlcXVpcmUoImZ6Zi1sdWEubWFrZV9lbnRyeSIpLnByZXByb2Nlc3M=]==],[==[bmls]==]' || true
[Fzf-lua]: fzf cmd: fzf --print-query --height '100%' --ansi --layout 'reverse' --print0 --border 'none' --bind 'ctrl-q:select-all+print(enter)+accept' --bind 'zero:execute-silent(mkdir '\''/tmp/nvim.otavio/c9gmvn/1'\'' && '\''/home/otavio/.local/share/bob/v0.11.2/bin/nvim'\'' -u NONE -l '\''/home/otavio/.local/share/neo-nvim/lazy/fzf-lua/lua/fzf-lua/shell_helper.lua'\'' 2 true )' --bind 'enter:print(enter)+accept,ctrl-t:print(ctrl-t)+accept,ctrl-s:print(ctrl-s)+accept,ctrl-v:print(ctrl-v)+accept,alt-i:print(alt-i)+accept,alt-Q:print(alt-Q)+accept,alt-q:print(alt-q)+accept,ctrl-c:print(ctrl-c)+accept,esc:print(esc)+accept,alt-f:print(alt-f)+accept,alt-h:print(alt-h)+accept' --preview ''\''/home/otavio/.local/share/bob/v0.11.2/bin/nvim'\'' -u NONE -l '\''/home/otavio/.local/share/neo-nvim/lazy/fzf-lua/lua/fzf-lua/shell_helper.lua'\'' 1 true {} {q} {n}' --info 'inline-right' --prompt '~/Projetos/api/' --multi --nth '-1..' --delimiter '[ ]' --highlight-line --preview-window 'nohidden:right:0' > '/tmp/nvim.otavio/c9gmvn/3'
Received file_path: '[DEBUG] fdfind --hidden --color=never --type f --type l --exclude .git'
After fnamemodify: '[DEBUG] fdfind --hidden --color=never --type f --type l --exclude .git'
After trim: '[DEBUG] fdfind --hidden --color=never --type f --type l --exclude .git'
Adding to history: '[DEBUG] fdfind --hidden --color=never --type f --type l --exclude .git'
